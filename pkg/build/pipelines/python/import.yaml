name: Test a python package import, with optional from clause

needs:
  packages:
    - wolfi-base

inputs:
  import:
    description: |
      The package to import.
    required: true
  from:
    description: |
      The package to import (from <from> import <import>).
    required: false

pipeline:
  - runs: |
      if [ -n "${{inputs.from}}" ]; then
        python3 -c "from ${{inputs.from}} import ${{inputs.import}}" || echo "Failed to import ${{inputs.import}} from ${{inputs.from}}" && exit 1;
        echo "Library ${{inputs.import}} was successfully imported from ${{inputs.from}}"
      else
        python3 -c "import ${{inputs.import}}" || echo "Failed to import Library ${{inputs.import}}" && exit 1;
        echo "Library ${{inputs.import}} was successfully imported"
      fi
